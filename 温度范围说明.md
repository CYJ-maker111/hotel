# 空调系统温度范围说明

## 温度设置规则

### 制冷模式（COOL）
- **服务范围**：18℃ - 28℃
- **限制处理**：
  - 设置温度 < 18℃ → 自动调整为 18℃
  - 设置温度 > 28℃ → 自动调整为 28℃
- **默认温度**：25℃

### 制热模式（HEAT）
- **服务范围**：18℃ - 25℃
- **限制处理**：
  - 设置温度 < 18℃ → 自动调整为 18℃
  - 设置温度 > 25℃ → 自动调整为 25℃（按25℃计算）
- **默认温度**：23℃

## 实现位置

### 后端验证
文件：`ac_core/server.py`

函数：`update_target_temperature()`

```python
# 根据模式限制目标温度范围
if room.mode == Mode.COOL:
    # 制冷模式：18-28℃
    if new_target_temp < 18:
        new_target_temp = 18
    elif new_target_temp > 28:
        new_target_temp = 28
else:  # HEAT模式
    # 制热模式：18-25℃
    if new_target_temp < 18:
        new_target_temp = 18
    elif new_target_temp > 25:
        new_target_temp = 25  # 超过25℃按25℃计算
```

### 前端验证
文件：`client/room_remote.html`

函数：`adjustTemperature()`

前端在用户调整温度时也会进行验证，防止用户输入超出范围的温度值。

## 使用示例

### 场景1：制热模式调温超过限制
```
用户操作：在制热模式下设置目标温度为26℃
系统处理：自动将温度调整为25℃
实际执行：按25℃提供制热服务
```

### 场景2：制冷模式调温低于限制  
```
用户操作：在制冷模式下设置目标温度为16℃
系统处理：自动将温度调整为18℃
实际执行：按18℃提供制冷服务
```

## 注意事项

1. **双重验证**：前端和后端都会进行温度范围验证，确保系统安全
2. **静默调整**：超出范围的温度会被静默调整到边界值，不会报错
3. **计费依据**：费用计算基于实际执行的目标温度（调整后的温度）
4. **测试用例**：测试文件中设置的温度如果超出范围，也会被自动调整

## 更新日期
2025年

## 相关文档
- [更新说明.md](./更新说明.md) - 系统功能更新文档
- [README.md](./README.md) - 系统总体说明

